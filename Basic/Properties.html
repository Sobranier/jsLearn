<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>变量、作用域、内存</title>
</head>
<body>

<script>
    // 引用类型的复制其实是指针
    var obj1 = new Object();
    var obj2 = obj1;
    obj1.name = 'nio';
    console.log(obj2.name);

    console.log('理解这样一句话：变量访问有按值和按引用两种方式，但是函数参数只有按值传递。向参数传递引用类型的值时，会把这个值在内存中的地址复制给局部变量，因此这个局部变量的变化会反应在函数外部');

    function addTen(num){
        num += 10;
        return num;
    }
    var count = 20;
    var result = addTen(count);
    console.log(count);
    console.log(result);

    function setName(obj) {
        obj.name = 'nio';
    }
    var person = new Object();
    setName(person);
    console.log(person.name);

    function setNameNew(obj) {
        obj.name = 'noko';  //注意！！！这里所谓的按值传递，指的是地址，地址复制进去之后，只要不复制新值，就不会发生改变，这时候直接操作和外面也是有联系的，但是如果赋值了，就会切断联系
        obj = new Object(); //重写obj，这个变量引用的就是一个局部变量了，而这个局部对象在函数执行完毕后立即销毁
        obj.name = "Gro";
    }
    var persons = new Object();
    setNameNew(persons);
    console.log(persons.name);
    
    var pp1 = new Object();
    pp2 = pp1;
    pp1.name = 'XXX';
    console.log(pp2.name);
    pp2 = new Object();
    pp2.name = 'OOO';
    console.log(pp1.name);

    // 作用域链的问题
    function buildUrl() {
        var qs = "?debug=true";
        with(location) {
            var url = href + qs;
        }
        console.log(url);
    }
    buildUrl();

    console.log('确保占用最少的内存可以让界面获得更好的性能，优化内存占用的最佳方式，就是一旦不再有用，就设置值为null来释放其引用。“解除引用”，真正作用是让值脱离执行环境，以便垃圾收集器下次运行时将其收回');



</script>

</body>
</html>

