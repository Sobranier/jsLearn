<!doctype html>
<html lang='en-GB'>
<head>
    <meta charset='utf-8'>
    <title>List sections</title>
    <script src='http://cdn.ractivejs.org/latest/ractive.min.js'></script>
</head>

<body>

    <div id="ct1"></div>
    <script id="tp1" type="text/ractive">
        <table class='superheroes'>
            <tr>
                <th>#</th>
                <th class='sortable' on-click='sort:name'>Superhero name</th>
                <th class='sortable' on-click='sort:realname'>Real name</th>
                <th class='sortable' on-click='sort:power'>Superpower</th>
            </tr>

            {{#each sort( superheroes, sortColumn ) :num}}
                <tr>
                    <td>{{num+1}}</td>
                    <td><a href='{{info}}'>{{name}}</a></td>
                    <td>{{realname}}</td>
                    <td>{{power}}</td>
                </tr>
            {{/each}}
        </table>

    </script>
    <script>
        var ractive, xmen;
        xmen = [
            { name: 'Nightcrawler', realname: 'Wagner, Kurt',     power: 'Teleportation',    info: 'http://www.superherodb.com/Nightcrawler/10-107/' },
            { name: 'Cyclops',      realname: 'Summers, Scott',   power: 'Optic blast',      info: 'http://www.superherodb.com/Cyclops/10-50/' },
            { name: 'Rogue',        realname: 'Marie, Anna',      power: 'Absorbing powers', info: 'http://www.superherodb.com/Rogue/10-831/' },
            { name: 'Wolverine',    realname: 'Howlett, James',   power: 'Regeneration',     info: 'http://www.superherodb.com/Wolverine/10-161/' }
        ];

        ractive = new Ractive({
            el:'ct1',
            template:'#tp1',
            data:{
                superheroes: xmen,
                sort: function ( array, column ) {
                    array = array.slice(); // clone, so we don't modify the underlying data

                    return array.sort( function ( a, b ) {
                        return a[ column ] < b[ column ] ? -1 : 1;
                    });
                },
                sortColumn: 'name'
            }
        });
        ractive.set( 'superheroes.3.name', '严伟庆' );

        var newSuperhero = {
            name: 'Storm',
            realname: 'Monroe, Ororo',
            power: 'Controlling the weather',
            info: 'http://www.superherodb.com/Storm/10-135/'
        };

        xmen.push( newSuperhero );

        ractive.set('superheroes[' + ractive.get('superheroes').length + ']', newSuperhero);

        ractive.on( 'sort', function ( event, column ) {
            console.log( 'Sorting by ' + column );
            this.set( 'sortColumn', column );
        });

    </script>


</body>
</html>
